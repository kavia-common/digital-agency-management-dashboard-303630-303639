{"is_source_file": true, "format": "Python", "description": "This is a Python source file that sets up a FastAPI application for a project management backend API. It includes configuration loading with fallback, router registration with error handling, health and readiness endpoints, and startup/shutdown event handlers. The code primarily initializes API documentation, configures CORS, registers routers conditionally, and defines global exception handlers.", "external_files": ["src.api.config", "src.api.routers.auth", "src.api.routers.users", "src.api.routers.projects", "src.api.routers.clients", "src.api.routers.dashboard", "src.api.routers.settings"], "external_methods": ["get_env_summary", "logger.error", "logger.warning", "logger.info"], "published": ["app", "health_check", "readiness_check", "root"], "classes": [], "methods": [{"name": "None _include_router_safe(module_path: str, key: str)", "description": "Safely imports and registers a router module, logs success or failure.", "scope": "", "scopeKind": ""}, {"name": "http_exception_handler(request: Request, exc: StarletteHTTPException)", "description": "Handles HTTP exceptions uniformly with JSON responses.", "scope": "", "scopeKind": ""}, {"name": "validation_exception_handler(request: Request, exc: RequestValidationError)", "description": "Handles request validation errors for detailed client feedback.", "scope": "", "scopeKind": ""}, {"name": "general_exception_handler(request: Request, exc: Exception)", "description": "Handles unexpected exceptions gracefully with logging.", "scope": "", "scopeKind": ""}, {"name": "health_check()", "description": "Provides a basic health status endpoint returning a 200 status.", "scope": "", "scopeKind": ""}, {"name": "readiness_check()", "description": "Returns readiness status with optional warnings based on configuration.", "scope": "", "scopeKind": ""}, {"name": "root()", "description": "API root endpoint providing basic information.", "scope": "", "scopeKind": ""}, {"name": "startup_event()", "description": "Logs startup info, config summary, and router load status.", "scope": "", "scopeKind": ""}, {"name": "shutdown_event()", "description": "Logs shutdown info.", "scope": "", "scopeKind": ""}, {"name": "dict get_env_summary()", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["logger.error", "logger.warning", "logger.info", "os.getenv", "uvicorn.run"], "search-terms": ["FastAPI", "API documentation", "Router registration", "Health check", "CORS middleware", "Exception handling", "configuration loading", "src.api.config", "src.api.routers"], "state": 2, "file_id": 3, "knowledge_revision": 39, "git_revision": "c78dcb5c45e9f3dd8dc8775aff19de63c8557218", "revision_history": [{"8": "e0de3f0029d4d9955d408fef72bd03c92d94cb26"}, {"20": "e0de3f0029d4d9955d408fef72bd03c92d94cb26"}, {"33": "5a3dd6b8ad2345d0ff28b83764c1dfd419929b92"}, {"34": "5a3dd6b8ad2345d0ff28b83764c1dfd419929b92"}, {"38": "4d2b8b1e6435d1c437c03bb217e51a61cfde6ffc"}, {"39": "c78dcb5c45e9f3dd8dc8775aff19de63c8557218"}], "ctags": [{"_type": "tag", "name": "ALLOWED_ORIGINS", "path": "/home/kavia/workspace/code-generation/digital-agency-management-dashboard-303630-303639/project_management_backend/src/api/main.py", "pattern": "/^    ALLOWED_ORIGINS = []$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "AUTH_CONFIGURED", "path": "/home/kavia/workspace/code-generation/digital-agency-management-dashboard-303630-303639/project_management_backend/src/api/main.py", "pattern": "/^    AUTH_CONFIGURED = False$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "FRONTEND_URL", "path": "/home/kavia/workspace/code-generation/digital-agency-management-dashboard-303630-303639/project_management_backend/src/api/main.py", "pattern": "/^    FRONTEND_URL = \"http:\\/\\/localhost:3000\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "SUPABASE_KEY", "path": "/home/kavia/workspace/code-generation/digital-agency-management-dashboard-303630-303639/project_management_backend/src/api/main.py", "pattern": "/^    SUPABASE_KEY = None$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "SUPABASE_URL", "path": "/home/kavia/workspace/code-generation/digital-agency-management-dashboard-303630-303639/project_management_backend/src/api/main.py", "pattern": "/^    SUPABASE_URL = None$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "StarletteHTTPException", "path": "/home/kavia/workspace/code-generation/digital-agency-management-dashboard-303630-303639/project_management_backend/src/api/main.py", "pattern": "/^from starlette.exceptions import HTTPException as StarletteHTTPException$/", "language": "Python", "kind": "unknown", "nameref": "unknown:HTTPException"}, {"_type": "tag", "name": "_include_router_safe", "path": "/home/kavia/workspace/code-generation/digital-agency-management-dashboard-303630-303639/project_management_backend/src/api/main.py", "pattern": "/^def _include_router_safe(module_path: str, key: str) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(module_path: str, key: str)"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/digital-agency-management-dashboard-303630-303639/project_management_backend/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "config_loaded", "path": "/home/kavia/workspace/code-generation/digital-agency-management-dashboard-303630-303639/project_management_backend/src/api/main.py", "pattern": "/^    config_loaded = False$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "config_loaded", "path": "/home/kavia/workspace/code-generation/digital-agency-management-dashboard-303630-303639/project_management_backend/src/api/main.py", "pattern": "/^    config_loaded = True$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "cors_origins", "path": "/home/kavia/workspace/code-generation/digital-agency-management-dashboard-303630-303639/project_management_backend/src/api/main.py", "pattern": "/^    cors_origins = [*cors_origins, FRONTEND_URL]$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "cors_origins", "path": "/home/kavia/workspace/code-generation/digital-agency-management-dashboard-303630-303639/project_management_backend/src/api/main.py", "pattern": "/^cors_origins = ALLOWED_ORIGINS if ALLOWED_ORIGINS else default_origins$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "default_origins", "path": "/home/kavia/workspace/code-generation/digital-agency-management-dashboard-303630-303639/project_management_backend/src/api/main.py", "pattern": "/^default_origins = [$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "general_exception_handler", "path": "/home/kavia/workspace/code-generation/digital-agency-management-dashboard-303630-303639/project_management_backend/src/api/main.py", "pattern": "/^async def general_exception_handler(request: Request, exc: Exception):$/", "language": "Python", "kind": "function", "signature": "(request: Request, exc: Exception)"}, {"_type": "tag", "name": "get_env_summary", "path": "/home/kavia/workspace/code-generation/digital-agency-management-dashboard-303630-303639/project_management_backend/src/api/main.py", "pattern": "/^    def get_env_summary() -> dict:$/", "language": "Python", "typeref": "typename:dict", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/digital-agency-management-dashboard-303630-303639/project_management_backend/src/api/main.py", "pattern": "/^def health_check():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "host", "path": "/home/kavia/workspace/code-generation/digital-agency-management-dashboard-303630-303639/project_management_backend/src/api/main.py", "pattern": "/^    host = os.getenv(\"UVICORN_HOST\", \"0.0.0.0\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "http_exception_handler", "path": "/home/kavia/workspace/code-generation/digital-agency-management-dashboard-303630-303639/project_management_backend/src/api/main.py", "pattern": "/^async def http_exception_handler(request: Request, exc: StarletteHTTPException):$/", "language": "Python", "kind": "function", "signature": "(request: Request, exc: StarletteHTTPException)"}, {"_type": "tag", "name": "logger", "path": "/home/kavia/workspace/code-generation/digital-agency-management-dashboard-303630-303639/project_management_backend/src/api/main.py", "pattern": "/^logger = logging.getLogger(__name__)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "port", "path": "/home/kavia/workspace/code-generation/digital-agency-management-dashboard-303630-303639/project_management_backend/src/api/main.py", "pattern": "/^    port = int(os.getenv(\"PORT\", \"3001\"))$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "readiness_check", "path": "/home/kavia/workspace/code-generation/digital-agency-management-dashboard-303630-303639/project_management_backend/src/api/main.py", "pattern": "/^def readiness_check():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "root", "path": "/home/kavia/workspace/code-generation/digital-agency-management-dashboard-303630-303639/project_management_backend/src/api/main.py", "pattern": "/^def root():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "routers_loaded", "path": "/home/kavia/workspace/code-generation/digital-agency-management-dashboard-303630-303639/project_management_backend/src/api/main.py", "pattern": "/^routers_loaded: dict[str, bool] = {}$/", "language": "Python", "typeref": "typename:dict[str, bool]", "kind": "variable"}, {"_type": "tag", "name": "shutdown_event", "path": "/home/kavia/workspace/code-generation/digital-agency-management-dashboard-303630-303639/project_management_backend/src/api/main.py", "pattern": "/^async def shutdown_event():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "startup_event", "path": "/home/kavia/workspace/code-generation/digital-agency-management-dashboard-303630-303639/project_management_backend/src/api/main.py", "pattern": "/^async def startup_event():$/", "language": "Python", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "tags_metadata", "path": "/home/kavia/workspace/code-generation/digital-agency-management-dashboard-303630-303639/project_management_backend/src/api/main.py", "pattern": "/^tags_metadata = [$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "validation_exception_handler", "path": "/home/kavia/workspace/code-generation/digital-agency-management-dashboard-303630-303639/project_management_backend/src/api/main.py", "pattern": "/^async def validation_exception_handler(request: Request, exc: RequestValidationError):$/", "language": "Python", "kind": "function", "signature": "(request: Request, exc: RequestValidationError)"}], "hash": "19567d4365c4dabafcd240a7d385190c", "format-version": 4, "code-base-name": "project_management_backend", "filename": "project_management_backend/src/api/main.py", "fields": [{"name": "ALLOWED_ORIGINS = []", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "AUTH_CONFIGURED = False", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "FRONTEND_URL = \"http:\\/\\/localhost:3000\"", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "SUPABASE_KEY = None", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "SUPABASE_URL = None", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "config_loaded = False", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "config_loaded = True", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "cors_origins = [*cors_origins, FRONTEND_URL]", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "cors_origins = ALLOWED_ORIGINS if ALLOWED_ORIGINS else default_origins", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "default_origins = [", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "host = os.getenv(\"UVICORN_HOST\", \"0.0.0.0\")", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "logger = logging.getLogger(__name__)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "port = int(os.getenv(\"PORT\", \"3001\"))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "dict[str, bool] routers_loaded", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "tags_metadata = [", "scope": "", "scopeKind": "", "description": "unavailable"}]}